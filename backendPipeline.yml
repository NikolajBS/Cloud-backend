steps:
  - name: 'gcr.io/cloud-builders/git'
    args: ['clone', '--recursive', 'https://github.com/NikolajBS/Cloud-backend']

  # Step 2: Install dependencies using npm
  - name: 'node:14'
    entrypoint: npm
    args: ['install']

  # Step 3: Build the application
  - name: 'node:14'
    entrypoint: npm
    args: ['run', 'build']

  - name: 'gcr.io/cloud-builders/docker'
    args: ['build', '-t', 'gcr.io/cloud-handin-project/backend-img', '.']

images:
  - 'gcr.io/cloud-handin-project/backend-img'


